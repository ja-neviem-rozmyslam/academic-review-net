<div class="card-base p-6 h-full">
  <ng-container *ngIf="conferenceId !== null; else loading">
    <ng-container *ngIf="showInReadMode; then reviewReadTemplate else reviewFormTemplate"></ng-container>
  </ng-container>

  <ng-template #loading>
    <div class="skeleton-loader">
      <div class="arn-input">
        <div class="skeleton skeleton-text"></div>
      </div>
      <div class="arn-input">
        <div class="skeleton skeleton-text"></div>
      </div>
      <div class="arn-input">
        <div class="skeleton skeleton-text"></div>
      </div>
      <div class="flex flex-col gap-4 sm:flex-row sm:gap-8 w-full">
        <div class="arn-input sm:w-1/2">
          <div class="skeleton skeleton-text"></div>
        </div>
        <div class="arn-input sm:w-1/2">
          <div class="skeleton skeleton-text"></div>
        </div>
      </div>
    </div>
  </ng-template>

  <ng-template #reviewFormTemplate>
    <form class="space-y-4" appFormValidation>
      @for (field of reviewFormFields; track field) {
        <div class="arn-input">
          <label [for]="field.id">{{ field.reviewedCategory }}</label>

          @if (field.isTextField) {
            <textarea
              [id]="field.id"
              [(ngModel)]="reviewFormValues[field.id]"
              [name]="field.id"
              rows="3"
              placeholder="Napíšte hodnotenie..."
              required></textarea>
          } else if (field.isSelectionField) {
            <app-arn-select
              *ngIf="field.isSelectionField"
              [id]="field.id"
              [name]="field.id"
              [placeholder]="'Vyberte možnosť'"
              [(selectedOption)]="reviewFormValues[field.id]"
              [options]="reviewRatingOptions"
              required/>
          }
        </div>
      }
      <div class="flex w-full mt-4">
        <app-arn-button type="submit" [buttonText]="'Odoslať posudok'" [classes]="'h-full'"></app-arn-button>
      </div>
    </form>
  </ng-template>

  <ng-template #reviewReadTemplate>

  </ng-template>
</div>
